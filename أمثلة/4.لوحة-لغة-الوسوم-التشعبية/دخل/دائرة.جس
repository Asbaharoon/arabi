استيراد { ليس_رقما } من "./مساعدات.جس"؛

تصدير ثابت لوحتي = مستند.محدد_الاستعلام(".لوحة")؛
تصدير ثابت سياق = لوحتي.احضر_السياق("2d")؛

تصدير افتراضي فئة دائرة {
	#قيم_إجبارية_رقمية = ["س"، "ص"، "نق"، "ك" /* كتلة */]؛
	__ع = { س: 0، ص:0 }؛ // السرعة الابتدائية 
	 
	منشئ(إعدادات) {
		لكل(متغير خ من هذا.#قيم_إجبارية_رقمية)
		لو(ليس_رقما(إعدادات[خ])) هذا.#اقذف_خطأ_إعداد(خ)؛
		كائن.عين(هذا، إعدادات)؛
	}
	
	احضر ع(){ ارجع هذا.__ع؛ }
	عين ع(قيمة) {
		ليس_رقما(قيمة.س) && هذا.#اقذف_خطأ_إعداد("ع.س")؛
		ليس_رقما(قيمة.ص) && هذا.#اقذف_خطأ_إعداد("ع.ص")؛
		هذا.__ع = قيمة؛
	}


	#اقذف_خطأ_إعداد(اسم_الإعداد) {
		اقذف انشئ خطأ("قيمة غير متوقعة لـ \"" + اسم_الإعداد + "\" الخاصة بالدائرة")؛
	}

	تحديث(){
		هذا.س += هذا.ع.س؛
		هذا.ص += هذا.ع.ص؛
	}

	ارسم() {
		عرف _س = هذا.س،
			_ص = هذا.ص،
			_نق = هذا.نق؛
		سياق.ابدأ_مسار()؛
		هذا.رسم && (كائن.عين(سياق، هذا.رسم))؛
		سياق.إهليج(_س، _ص، _نق، _نق، 0 ، 0 ، 2*رياضيات.ط )؛
		!هذا.جوفاء && (سياق.املئ()، حق) || سياق.خطط()؛
	}
}
